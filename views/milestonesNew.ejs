<!-- views/milestones_new.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Add New Milestone</title>
  <%- include('partials/head') %>
</head>
<body>
<div class="layout">
  <%- include('partials/userbar') %>
  <%- include('partials/sidebar', { active: 'milestones' }) %>
  <main class="main">

<h1>Add New Milestone</h1>
<p>
  <a href="/milestones" class="btn secondary-btn">Back to Milestones List</a>
</p>

<!-- Error message -->
<% if (error_message) { %>
  <div class="alert alert-error"><%= error_message %></div>
<% } %>

<form method="post" action="/milestones/new" class="form-card form-shell">
  <input type="hidden" name="_csrf" value="<%= csrfToken %>">

  <table>
    <% if (isManager) { %>
      <tr>
        <th>Participant Email*</th>
        <td>
          <input type="email"
                 name="email"
                 value="<%= email || '' %>"
                 required>
        </td>
      </tr>
    <% } else { %>
      <tr>
        <th>Participant</th>
        <td>Adding milestone for your account.</td>
      </tr>
    <% } %>

    <tr>
      <th>Milestone Title*</th>
      <td>
        <input type="text"
               name="milestonetitle"
               value="<%= milestonetitle || '' %>"
               required>
      </td>
    </tr>

    <tr>
      <th>Milestone Date*</th>
      <td>
        <input type="date"
               name="milestonedate"
               value="<%= milestonedate || '' %>"
               required>
      </td>
    </tr>
  </table>

  <div class="form-actions">
    <button type="submit">Create Milestone</button>
  </div>
</form>

  </main>
</div>
</body>
</html>
