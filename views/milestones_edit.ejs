<!-- views/milestones_edit.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit Milestone</title>
</head>
<body>

<h1>Edit Milestone</h1>

<% if (error_message) { %>
  <p style="color:red;"><%= error_message %></p>
<% } %>

<p>
  <a href="/milestones">Back to Milestones List</a>
</p>

<% if (!milestone) { %>
  <p>Milestone not found.</p>
<% } else { %>
  <form method="post" action="/milestones/<%= milestone.milestoneid %>/edit">
    <input type="hidden" name="_csrf" value="<%= csrfToken %>">

    <div>
      <strong>Participant:</strong>
      <%= milestone.participantfirstname %> <%= milestone.participantlastname %>
      (<%= milestone.email %>)
    </div>

    <div>
      <label>
        Milestone Title:
        <input type="text"
               name="milestonetitle"
               value="<%= milestone.milestonetitle || '' %>"
               required>
      </label>
    </div>

    <div>
      <label>
        Milestone Date:
        <input type="date"
               name="milestonedate"
               value="<%= milestone.milestonedate
                        ? new Date(milestone.milestonedate).toISOString().slice(0, 10)
                        : '' %>"
               required>
      </label>
    </div>

    <div>
      <button type="submit">Save Changes</button>
    </div>
  </form>
<% } %>

</body>
</html>
