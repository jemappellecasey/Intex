<!DOCTYPE html>
<html lang="en">
<head>
  <title>Donate to Ella Rises</title>
  <%- include('partials/head') %>
</head>
<body>
  <div class="page-card narrow">
    <h1>Support Ella Rises</h1>
    <p class="text-muted">Your donation helps ...</p>

    <% if (validationErrors && validationErrors.length) { %>
      <div class="alert alert-error">
        <ul>
          <% validationErrors.forEach(function(msg) { %>
            <li><%= msg %></li>
          <% }) %>
        </ul>
      </div>
    <% } %>

    <% if (error_message) { %>
      <div class="alert alert-error"><%= error_message %></div>
    <% } %>

    <% if (success_message && (typeof backToDonations === 'undefined' || !backToDonations)) { %>
      <div class="alert alert-success"><%= success_message %></div>
    <% } %>

    <form method="post" action="/donate" class="form-card">
      <input type="hidden" name="_csrf" value="<%= csrfToken %>">
      <% if (typeof backToDonations !== 'undefined' && backToDonations) { %>
        <input type="hidden" name="from" value="donations">
      <% } %>

      <% if (isLoggedIn) { %>
        <input type="hidden" name="email" value="<%= prefillemail || '' %>">
        <p><strong>Email:</strong> <%= prefillemail || '(from account)' %></p>
      <% } else { %>
        <div>
          <label>
            Email*<br>
            <input type="email" name="email" value="<%= prefillemail || '' %>" required>
          </label>
        </div>
      <% } %>

      <div>
        <label>
          Donation Amount*<br>
          <input type="number" step="0.01" name="donationamount" required>
        </label>
      </div>

      <button type="submit">Donate</button>
    </form>

    <p class="mt-2">
      <% if ((typeof backToDonations !== 'undefined' && backToDonations) || isLoggedIn) { %>
        <a href="/donations">Back to Donations</a>
      <% } else { %>
        <a href="/landing">Back to Landing</a>
      <% } %>
    </p>
  </div>
</body>
</html>
