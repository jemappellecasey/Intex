<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="/css/style.css">

  <meta charset="UTF-8">
  <title>Edit Donation</title>
</head>
<body>
<div class="layout">
  <%- include('partials/userbar') %>
  <%- include('partials/sidebar', { active: 'donations' }) %>
  <main class="main">

<h1>Edit Donation</h1>
<p><a href="/donations">Back to Donations</a></p>

<% if (error_message) { %>
  <div class="alert alert-error"><%= error_message %></div>
<% } %>

<% if (!donation) { %>
  <p>Donation not found.</p>
<% } else { %>
  <form method="post" action="/donations/<%= donation.donationid %>/edit">
    <input type="hidden" name="_csrf" value="<%= csrfToken %>">

    <% if (isManager) { %>
      <div>
        <label>
          Participant Email:
          <input type="email" name="email" value="<%= donation.email || '' %>" required>
        </label>
      </div>
    <% } else { %>
      <p>Editing donation for your account.</p>
    <% } %>

    <div>
      <label>
        Donation Amount:
        <input type="number" step="0.01" name="donationamount" value="<%= donation.donationamount || '' %>" required>
      </label>
    </div>

    <div>
      <label>
        Donation Date:
        <input type="date" name="donationdate" value="<%= donation.donationdate ? new Date(donation.donationdate).toISOString().slice(0,10) : '' %>" required>
      </label>
    </div>

    <div>
      <button type="submit">Save Changes</button>
    </div>
  </form>
<% } %>

  </main>
</div>
</body>
</html>
