<!DOCTYPE html>
<html lang="en">
<head>
  <title>Edit Donation</title>
  <%- include('partials/head') %>
</head>
<body>
<div class="layout">
  <%- include('partials/userbar') %>
  <%- include('partials/sidebar', { active: 'donations' }) %>
<main class="main">

<h1>Edit Donation</h1>
<p><a href="/donations" class="btn secondary-btn">Back to Donations</a></p>

<% if (error_message) { %>
  <div class="alert alert-error"><%= error_message %></div>
<% } %>
<% if (success_message) { %>
  <div class="alert alert-success"><%= success_message %></div>
<% } %>

<% if (!donation) { %>
  <p>Donation not found.</p>
<% } else { %>
  <form method="post" action="/donations/<%= donation.donationid %>/edit" class="form-card form-shell">
    <input type="hidden" name="_csrf" value="<%= csrfToken %>">

    <table class="form-table compact">
      <% if (isManager) { %>
      <tr>
        <th>Participant Email*</th>
        <td>
          <input type="email" name="email" value="<%= donation.email || '' %>" required>
        </td>
      </tr>
      <% } else { %>
      <tr>
        <th>Participant</th>
        <td>Editing donation for your account.</td>
      </tr>
      <% } %>

      <tr>
        <th>Donation Amount*</th>
        <td>
          <input type="number" step="0.01" name="donationamount" value="<%= donation.donationamount || '' %>" required>
        </td>
      </tr>

      <tr>
        <th>Donation Date*</th>
        <td>
          <input type="date" name="donationdate" value="<%= donationDateValue || '' %>" required>
        </td>
      </tr>
    </table>

    <div class="form-actions centered">
      <button type="submit" class="btn">Save Changes</button>
      <a href="/donations" class="btn secondary-btn" style="margin-left:8px;">Cancel</a>
    </div>
  </form>
<% } %>

  </main>
</div>
</body>
</html>
