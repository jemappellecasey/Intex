<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="/css/style.css">

  <meta charset="UTF-8">
  <title>Add Event</title>
</head>
<body>
<div class="layout">
  <aside class="sidebar">
    <div class="sidebar-brand">
      <a href="/dashboard" aria-label="Back to dashboard">
        <img src="/images/logo.png" alt="Ella Rises logo" class="brand-logo">
      </a>
    </div>
    <h2>Menu</h2>
    <nav>
      <a href="/dashboard">Dashboard</a>
      <a href="/participants">Participants</a>
      <a href="/events" class="active">Events</a>
      <a href="/surveys">Surveys</a>
      <a href="/milestones">Milestones</a>
      <a href="/donations">Donations</a>
      <% if (isManager) { %>
        <hr>
        <a href="/admin/settings">Admin Settings</a>
      <% } %>
    </nav>
  </aside>

  <main class="main-content">
    <h1>Add New Event</h1>
    <p><a href="/events">Back to Events</a></p>

    <% if (error_message) { %>
      <div class="alert alert-error"><%= error_message %></div>
    <% } %>

    <form method="post" action="/events/new">
      <input type="hidden" name="_csrf" value="<%= csrfToken %>">

      <label>
        Event Name (required):
        <input type="text" name="eventname" value="<%= event.eventname || '' %>" required>
      </label>

      <label>
        Event Type:
        <input type="text" name="eventtype" value="<%= event.eventtype || '' %>">
      </label>

      <label>
        Description:
        <textarea name="eventdescription" rows="4"><%= event.eventdescription || '' %></textarea>
      </label>

      <label>
        Location:
        <input type="text" name="eventlocation" value="<%= event.eventlocation || '' %>">
      </label>

      <label>
        Capacity:
        <input type="number" name="eventcapacity" min="0" value="<%= event.eventcapacity || '' %>">
      </label>

      <div style="display:flex; gap:12px; flex-wrap:wrap; align-items:flex-end;">
        <label style="flex:1; min-width:200px;">
          Start (required):
          <% const startVal = event.eventdatetimestart
                ? new Date(event.eventdatetimestart).toISOString().slice(0,16)
                : ''; %>
          <input type="datetime-local" name="eventdatetimestart" value="<%= startVal %>" required>
        </label>

        <label style="flex:1; min-width:200px;">
          End:
          <% const endVal = event.eventdatetimeend
                ? new Date(event.eventdatetimeend).toISOString().slice(0,16)
                : ''; %>
          <input type="datetime-local" name="eventdatetimeend" value="<%= endVal %>">
        </label>

        <label style="flex:1; min-width:200px;">
          Registration Deadline:
          <% const deadlineVal = event.eventregistrationdeadline
                ? new Date(event.eventregistrationdeadline).toISOString().slice(0,16)
                : ''; %>
          <input type="datetime-local" name="eventregistrationdeadline" value="<%= deadlineVal %>">
        </label>
      </div>

      <button type="submit">Create Event</button>
    </form>
  </main>
</div>
</body>
</html>
